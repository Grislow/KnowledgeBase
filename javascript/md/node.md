Node is a Javascript runtime written in C++ used to execute code outside of the browser.

In a client-server architecture an HTTP server is run using node. Node listens for HTTP requests on specified ports. Node can handle the requests on it's own but usually makes use of a library(like Express) that simplifies this process.

__TODO__:
* [web scraping](https://blog.bitsrc.io/https-blog-bitsrc-io-how-to-perform-web-scraping-using-node-js-5a96203cb7cb)

#### Table of contents

* [Conceptual](#conceptual)
    * [Environment Variables](#environment-variables)
    * [Deployment Checklist](#deployment-checklist)
* [CLI](#cli)
* [Modules](#modules)
    * [CommonJS](#CommonJS)
* [Events](#Events)
* [Native Modules](#native-modules)
* [Misc](#misc)

&nbsp;
# Conceptual
Core concepts and ideas you should understand as a node developer.

## Features
In order for JavaScript to manage a server many features needed to be implemented. Node makes this possible by including:
* working with a filesystem
* modular programming
    * CommonJS
* database interfacing
* network communication
* handling http requests and responses

All of these where implemented using C++, but wrappers written in JS are made available for simple integration into a JS application.


## Environment Variables
Variables that store runtime data. 

Environment variables are stored in the `process.env` object.

`PORT` - the port on which the app listens to.

``` javascript
const PORT = process.env.PORT;
```

## Deployment Checklist
When deploying a node server to a cloud service below is an example checklist of what needs to be done. This is as per __heroku__ cloud service requirements:
* __Dynamic Port Binding__ - specify the port which your app will be listening to
* __Specify Node Environment__ - specify the node version you app uses
* __Specify Start Script__ - specify command which will run your node environment
* __.gitignore__ - specify files which won't be included in the environment like _dependencies_

&nbsp;
# CLI
`node` - runs a JavaScript repl
`node example.js` - runs example.js in the node runtime environment

&nbsp;
# Modules
Node.js supports the CommonJS module syntax natively. ES6 modules can be used if transpiled using babel.

## CommonJS
CommonJS modules:
* are loaded synchronously
* do not allow named imports

When importing a JavaScript file you can omit the file extension. Node.js also supports .json and .node files. For any other extensions you will have to use a library.

When importing a .js file its content is wrapped in a closure. This closure only exposes module.exports and makes the rest inaccessible.

If the required file is not found node looks for a folder with the same name and attempts to load its `index.js` file.

```javascript
// import module
var example = require('./example');

// module export
module.exports = function() {
    console.log('test');
}
```

You can export multiple functions or variables by wrapping them in an object literal.

``` javascript
// Module
var example = function() {
    console.log('This is an example function');
}

var someVar = 1000;

module.exports = {
    example: exmaple,
    prop: someVar
}
```

``` javascript
// app.js
var example = require('./example');
var justProp = require('./example').prop;

example.example();

console.log(justProp);
```

&nbsp;
# Events
An occurence that you can catch and respond to in your application.

Events in Node.js are seperated into two groups:
* System Events - events that are triggered by the system. These are handled by the __libuv__ module and are forwarded to event emitters.
* Custom Events - events generated by an EventEmitter that can be handled using JavaScript code.

__Event Emitter__:
* listens for events and stores them
* s

Example of a very simplistic custom event emitter module.
``` javascript
var emitterFactory = function() {
    var events = {};

    var proto = {
        on: function(type, listener) {
            events[type] = events[type] || [];
            events[type].push(listener);
        },
        emit: function(type) {
            if(events[type]) {
                events[type].forEach(function(listener) {
                    listener();
                });
            }
        }
    }

    return Object.create(proto);
}

module.exports = emitterFactory;
```

&nbsp;
# Native Modules
Node.js comes with a lot of useful native utility modules. The full list can be found [here](https://nodejs.org/api/).


&nbsp;
# Misc

## Watch files with node
Source: [thisdavej](https://thisdavej.com/how-to-watch-for-files-changes-in-node-js/)

## Local Test Server
Sources:
* [hackernoon](https://hackernoon.com/build-your-first-local-server-and-web-app-with-node-js-5a5d9e00aff0)
* [websiteforstudents](https://websiteforstudents.com/install-the-latest-node-js-and-nmp-packages-on-ubuntu-16-04-18-04-lts/)
* [itsfoss](https://itsfoss.com/install-linux-in-virtualbox/)